# Технологии промышленного программирования

#### Баландин Александр Васильевич

2 курс 1 полугодие (3 семестр)

### Варианты

| Лабораторная работа | Вариант |
| :------------------ | :------ |
| 1                   | 9       |
| 2                   | 1.9       |
| 3                   | 9       |

# Лабораторные работы

> Если в папке лабораторной работы нет файлов программы или появляются ошибки при запуске, вы всегда можете найти код в конце отчёта.

## Лабораторная работа 1

Запуск и организация взаимодействия параллельных процессов

**Задание**

Разработать приложение, состоящее из трех взаимодействующих процессов. Требуется написать три программных модуля – М1, М2, М3. На базе модуля М1 из shell запускается стартовый процесс Р1(М1).
1. Процесс Р1 создает канал и, используя функцию семейства spawn*(), запускает процесс Р2(М2), передавая ему в качестве параметра chid созданного канала, затем переходит в состояние приема сообщений по созданному каналу.
2. Процесс Р2 создает свой канал, и, используя функцию семейства spawn*(), запускает процесс Р3(М3), передавая ему в качестве параметра chid созданного канала, затем устанавливает соединение с каналом процесса Р1, передает ему chid своего канала, затем переходит в состояние приема сообщений по своему каналу. Процесс Р3 устанавливает соединение с каналом процесса Р2 и посылает ему запрос на получение pid процесса Р1 и chid его канала. Получив от Р2 ответ (pid и chid), устанавливает соединение с каналом процесса Р1 и посылает ему свой pid и chid своего канала, после чего переходит в состояние приёма сообщений по своему каналу.
3. Процесс Р1 устанавливает соединение с каналом процесса Р2 и передает ему сообщение "Р1 send message to Р2", получив ответ, выводит его на терминал, затем устанавливает соединение с каналом процесса Р3 и передает ему сообщение "Р1 send message to Р3", получает ответ, выводит его на экран и терминируется.
4. Процесс Р2, получив сообщение от процесса Р1, выводит его на терминал, посылает ответ "Р2 executed " и терминируется. Процесс Р3, получив сообщение от процесса Р1, выводит его на экран, посылает ответ "Р3 executed " и терминируется.

## Лабораторная работа 2

Запуск и синхронизация нитей

**Задание**

Разработать приложение, состоящее из одного процесса с тремя запущенными нитями:
1. М(main).
2. Т1(F1).
3. Т2(F2).
В качестве нити М(main) выступает функция main(). Нити Т1(F1) и Т2(F2) запускаются нитью М(main) на базе соответственно функций F1() и F2(). Все три нити, работая параллельно, должны совместно динамически сформировать текст вида: "Text0, Text1, Text2.\n".

Порядок работы приложения
1. Вначале нить М(main) запускает первой нить Т1(F1), затем - Т2(F2), передавая им в качестве параметра указатель совместно формируемого текста.
2. Далее нить М(main), записывая в текст букву за буквой, формирует свою часть текста: "Text0, ".
3. После формирования нитями всего текста нить М(main) выдаёт его на печать и завершает свою работу.
4. Запущенная нить Т1(F1) должна тем же способом добавить в формируемый текст свою часть: "Text1, ".
5. После завершения записи соей части текста нить Т1(F1) ожидает записи в буфер своей части текста нитью Т2(F2), после чего завершает свою работу.
6. Запущенная нить Т2(F2) должна так же добавить в формируемый текст свою часть: "Text2.\n ", после чего завершает свою работу.

Замечание. Для имитации времени записи в текст одной буквы использовать пустой цикл в 1000 итераций.

Необходимо использовать: Именованные семафоры. Ждущие блокировки. Присоединение. 

## Лабораторная работа 3

Работа с именованной памятью и службой реального времени

**Задание**

1. Разработать приложение реального времени (ПРВ), осуществляющее мониторинг состояния абстрактного физического объекта Op, p – изменяющийся во времени параметр объекта. Мониторинг объекта Op осуществляется на относительном интервале времени t[0,Т]. За 0 принимается момент начала штатной работы ПРВ после её загрузки в вычислительную среду. В процессе мониторинга ПРВ формирует на вешнем носителе файл тренда параметра p. Непосредственно в момент времени Т программная система должна завершить свою работу. 
2. Изменение параметра p во времени моделируется функцией p=F(t), где t[0,Т] - момент времени получения текущего значения параметра p, выраженный в секундах. 
3. Объект Op в программной системе моделируется процессом Р1(М1). Программный модуль М1 реализует вычисление функции p=F(t) и размещение полученного текущего значения параметра p в именованную память, предварительно созданную при загрузке ПРВ (порядок создания именованной памяти определяется в варианте задания).
4. ПРВ, осуществляющее мониторинг, реализуется в программной системе в виде процесса Р2(М2), запускаемого на базе модуля М2 (порядок запуска процессов Р1 и Р2 определяется в варианте задания): 
5. Процесс Р1, начиная с t=0, периодически с заданной частотой обновляет текущее значение параметра p в именованной памяти. 
6. Процесс Р2, начиная с момента времени t=0, периодически с заданным периодом Δt считывает из именованной памяти текущее значение параметра p и формирует датированное значение в виде пары - . Результаты периодического считывания значений параметра p и соответствующей метки времени t используются процессом Р2 для занесения в текстовый файл (тренд параметра p) символьной строки, в которой символьное представление значения параметра p и соответствующего момента времени t разделяются знаком табуляции \t формата, а вся строка завершается управляющим символом \n: "<p>\t<t>\n "
7. Процессы Р1 и Р2 должны быть синхронизированы по моменту времени t=0. (процесс Р2 должен получить первое значение параметра p в момент t=0). Метод синхронизации выбрать самостоятельно. 
8. При наступлении момента t=Т работа программной системы должна немедленно завершиться (все процессы терминируются). 
9. Результаты работы ПРВ представить в виде графика тренда параметра p(t), например, загрузив содержимое полученного файла с трендом в MS EXCEL.

 ![Формула](<https://github.com/SSAU-gilera/master-3-TPP/blob/main/src/img-task-3.jpg>)
